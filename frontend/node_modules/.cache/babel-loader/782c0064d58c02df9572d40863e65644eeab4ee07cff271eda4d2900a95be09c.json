{"ast":null,"code":"import { omit } from \"../utils/omit.js\";\nimport { BaseConversationalTask, BaseTextGenerationTask, TaskProviderHelper } from \"./providerHelper.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst NEBIUS_API_BASE_URL = \"https://api.studio.nebius.ai\";\nexport class NebiusConversationalTask extends BaseConversationalTask {\n  constructor() {\n    super(\"nebius\", NEBIUS_API_BASE_URL);\n  }\n  preparePayload(params) {\n    const payload = super.preparePayload(params);\n    const responseFormat = params.args.response_format;\n    if (responseFormat?.type === \"json_schema\" && responseFormat.json_schema?.schema) {\n      payload[\"guided_json\"] = responseFormat.json_schema.schema;\n    }\n    return payload;\n  }\n}\nexport class NebiusTextGenerationTask extends BaseTextGenerationTask {\n  constructor() {\n    super(\"nebius\", NEBIUS_API_BASE_URL);\n  }\n  preparePayload(params) {\n    return {\n      ...params.args,\n      model: params.model,\n      prompt: params.args.inputs\n    };\n  }\n  async getResponse(response) {\n    if (typeof response === \"object\" && \"choices\" in response && Array.isArray(response?.choices) && response.choices.length > 0 && typeof response.choices[0]?.text === \"string\") {\n      return {\n        generated_text: response.choices[0].text\n      };\n    }\n    throw new InferenceClientProviderOutputError(\"Received malformed response from Nebius text generation API\");\n  }\n}\nexport class NebiusTextToImageTask extends TaskProviderHelper {\n  constructor() {\n    super(\"nebius\", NEBIUS_API_BASE_URL);\n  }\n  preparePayload(params) {\n    return {\n      ...omit(params.args, [\"inputs\", \"parameters\"]),\n      ...params.args.parameters,\n      response_format: \"b64_json\",\n      prompt: params.args.inputs,\n      model: params.model\n    };\n  }\n  makeRoute() {\n    return \"v1/images/generations\";\n  }\n  async getResponse(response, url, headers, outputType) {\n    if (typeof response === \"object\" && \"data\" in response && Array.isArray(response.data) && response.data.length > 0 && \"b64_json\" in response.data[0] && typeof response.data[0].b64_json === \"string\") {\n      if (outputType === \"json\") {\n        return {\n          ...response\n        };\n      }\n      const base64Data = response.data[0].b64_json;\n      if (outputType === \"url\") {\n        return `data:image/jpeg;base64,${base64Data}`;\n      }\n      return fetch(`data:image/jpeg;base64,${base64Data}`).then(res => res.blob());\n    }\n    throw new InferenceClientProviderOutputError(\"Received malformed response from Nebius text-to-image API\");\n  }\n}\nexport class NebiusFeatureExtractionTask extends TaskProviderHelper {\n  constructor() {\n    super(\"nebius\", NEBIUS_API_BASE_URL);\n  }\n  preparePayload(params) {\n    return {\n      input: params.args.inputs,\n      model: params.model\n    };\n  }\n  makeRoute() {\n    return \"v1/embeddings\";\n  }\n  async getResponse(response) {\n    return response.data.map(item => item.embedding);\n  }\n}","map":{"version":3,"names":["omit","BaseConversationalTask","BaseTextGenerationTask","TaskProviderHelper","InferenceClientProviderOutputError","NEBIUS_API_BASE_URL","NebiusConversationalTask","constructor","preparePayload","params","payload","responseFormat","args","response_format","type","json_schema","schema","NebiusTextGenerationTask","model","prompt","inputs","getResponse","response","Array","isArray","choices","length","text","generated_text","NebiusTextToImageTask","parameters","makeRoute","url","headers","outputType","data","b64_json","base64Data","fetch","then","res","blob","NebiusFeatureExtractionTask","input","map","item","embedding"],"sources":["/Users/agmacbook/Documents/Courses/Meta - Full Stack/Exercises/meta_fullstack_exercises/6_react_basics/12_review/13_chef_claude/node_modules/@huggingface/inference/dist/esm/providers/nebius.js"],"sourcesContent":["import { omit } from \"../utils/omit.js\";\nimport { BaseConversationalTask, BaseTextGenerationTask, TaskProviderHelper, } from \"./providerHelper.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst NEBIUS_API_BASE_URL = \"https://api.studio.nebius.ai\";\nexport class NebiusConversationalTask extends BaseConversationalTask {\n    constructor() {\n        super(\"nebius\", NEBIUS_API_BASE_URL);\n    }\n    preparePayload(params) {\n        const payload = super.preparePayload(params);\n        const responseFormat = params.args.response_format;\n        if (responseFormat?.type === \"json_schema\" && responseFormat.json_schema?.schema) {\n            payload[\"guided_json\"] = responseFormat.json_schema.schema;\n        }\n        return payload;\n    }\n}\nexport class NebiusTextGenerationTask extends BaseTextGenerationTask {\n    constructor() {\n        super(\"nebius\", NEBIUS_API_BASE_URL);\n    }\n    preparePayload(params) {\n        return {\n            ...params.args,\n            model: params.model,\n            prompt: params.args.inputs,\n        };\n    }\n    async getResponse(response) {\n        if (typeof response === \"object\" &&\n            \"choices\" in response &&\n            Array.isArray(response?.choices) &&\n            response.choices.length > 0 &&\n            typeof response.choices[0]?.text === \"string\") {\n            return {\n                generated_text: response.choices[0].text,\n            };\n        }\n        throw new InferenceClientProviderOutputError(\"Received malformed response from Nebius text generation API\");\n    }\n}\nexport class NebiusTextToImageTask extends TaskProviderHelper {\n    constructor() {\n        super(\"nebius\", NEBIUS_API_BASE_URL);\n    }\n    preparePayload(params) {\n        return {\n            ...omit(params.args, [\"inputs\", \"parameters\"]),\n            ...params.args.parameters,\n            response_format: \"b64_json\",\n            prompt: params.args.inputs,\n            model: params.model,\n        };\n    }\n    makeRoute() {\n        return \"v1/images/generations\";\n    }\n    async getResponse(response, url, headers, outputType) {\n        if (typeof response === \"object\" &&\n            \"data\" in response &&\n            Array.isArray(response.data) &&\n            response.data.length > 0 &&\n            \"b64_json\" in response.data[0] &&\n            typeof response.data[0].b64_json === \"string\") {\n            if (outputType === \"json\") {\n                return { ...response };\n            }\n            const base64Data = response.data[0].b64_json;\n            if (outputType === \"url\") {\n                return `data:image/jpeg;base64,${base64Data}`;\n            }\n            return fetch(`data:image/jpeg;base64,${base64Data}`).then((res) => res.blob());\n        }\n        throw new InferenceClientProviderOutputError(\"Received malformed response from Nebius text-to-image API\");\n    }\n}\nexport class NebiusFeatureExtractionTask extends TaskProviderHelper {\n    constructor() {\n        super(\"nebius\", NEBIUS_API_BASE_URL);\n    }\n    preparePayload(params) {\n        return {\n            input: params.args.inputs,\n            model: params.model,\n        };\n    }\n    makeRoute() {\n        return \"v1/embeddings\";\n    }\n    async getResponse(response) {\n        return response.data.map((item) => item.embedding);\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}