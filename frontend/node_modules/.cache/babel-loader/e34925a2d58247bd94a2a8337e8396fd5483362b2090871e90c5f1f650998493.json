{"ast":null,"code":"import { omit } from \"../utils/omit.js\";\nimport { BaseConversationalTask, TaskProviderHelper } from \"./providerHelper.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst NSCALE_API_BASE_URL = \"https://inference.api.nscale.com\";\nexport class NscaleConversationalTask extends BaseConversationalTask {\n  constructor() {\n    super(\"nscale\", NSCALE_API_BASE_URL);\n  }\n}\nexport class NscaleTextToImageTask extends TaskProviderHelper {\n  constructor() {\n    super(\"nscale\", NSCALE_API_BASE_URL);\n  }\n  preparePayload(params) {\n    return {\n      ...omit(params.args, [\"inputs\", \"parameters\"]),\n      ...params.args.parameters,\n      response_format: \"b64_json\",\n      prompt: params.args.inputs,\n      model: params.model\n    };\n  }\n  makeRoute() {\n    return \"v1/images/generations\";\n  }\n  async getResponse(response, url, headers, outputType) {\n    if (typeof response === \"object\" && \"data\" in response && Array.isArray(response.data) && response.data.length > 0 && \"b64_json\" in response.data[0] && typeof response.data[0].b64_json === \"string\") {\n      if (outputType === \"json\") {\n        return {\n          ...response\n        };\n      }\n      const base64Data = response.data[0].b64_json;\n      if (outputType === \"url\") {\n        return `data:image/jpeg;base64,${base64Data}`;\n      }\n      return fetch(`data:image/jpeg;base64,${base64Data}`).then(res => res.blob());\n    }\n    throw new InferenceClientProviderOutputError(\"Received malformed response from Nscale text-to-image API\");\n  }\n}","map":{"version":3,"names":["omit","BaseConversationalTask","TaskProviderHelper","InferenceClientProviderOutputError","NSCALE_API_BASE_URL","NscaleConversationalTask","constructor","NscaleTextToImageTask","preparePayload","params","args","parameters","response_format","prompt","inputs","model","makeRoute","getResponse","response","url","headers","outputType","Array","isArray","data","length","b64_json","base64Data","fetch","then","res","blob"],"sources":["/Users/agmacbook/Documents/Courses/Meta - Full Stack/Exercises/meta_fullstack_exercises/6_react_basics/12_review/13_chef_claude/node_modules/@huggingface/inference/dist/esm/providers/nscale.js"],"sourcesContent":["import { omit } from \"../utils/omit.js\";\nimport { BaseConversationalTask, TaskProviderHelper } from \"./providerHelper.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst NSCALE_API_BASE_URL = \"https://inference.api.nscale.com\";\nexport class NscaleConversationalTask extends BaseConversationalTask {\n    constructor() {\n        super(\"nscale\", NSCALE_API_BASE_URL);\n    }\n}\nexport class NscaleTextToImageTask extends TaskProviderHelper {\n    constructor() {\n        super(\"nscale\", NSCALE_API_BASE_URL);\n    }\n    preparePayload(params) {\n        return {\n            ...omit(params.args, [\"inputs\", \"parameters\"]),\n            ...params.args.parameters,\n            response_format: \"b64_json\",\n            prompt: params.args.inputs,\n            model: params.model,\n        };\n    }\n    makeRoute() {\n        return \"v1/images/generations\";\n    }\n    async getResponse(response, url, headers, outputType) {\n        if (typeof response === \"object\" &&\n            \"data\" in response &&\n            Array.isArray(response.data) &&\n            response.data.length > 0 &&\n            \"b64_json\" in response.data[0] &&\n            typeof response.data[0].b64_json === \"string\") {\n            if (outputType === \"json\") {\n                return { ...response };\n            }\n            const base64Data = response.data[0].b64_json;\n            if (outputType === \"url\") {\n                return `data:image/jpeg;base64,${base64Data}`;\n            }\n            return fetch(`data:image/jpeg;base64,${base64Data}`).then((res) => res.blob());\n        }\n        throw new InferenceClientProviderOutputError(\"Received malformed response from Nscale text-to-image API\");\n    }\n}\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,kBAAkB;AACvC,SAASC,sBAAsB,EAAEC,kBAAkB,QAAQ,qBAAqB;AAChF,SAASC,kCAAkC,QAAQ,cAAc;AACjE,MAAMC,mBAAmB,GAAG,kCAAkC;AAC9D,OAAO,MAAMC,wBAAwB,SAASJ,sBAAsB,CAAC;EACjEK,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,QAAQ,EAAEF,mBAAmB,CAAC;EACxC;AACJ;AACA,OAAO,MAAMG,qBAAqB,SAASL,kBAAkB,CAAC;EAC1DI,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,QAAQ,EAAEF,mBAAmB,CAAC;EACxC;EACAI,cAAcA,CAACC,MAAM,EAAE;IACnB,OAAO;MACH,GAAGT,IAAI,CAACS,MAAM,CAACC,IAAI,EAAE,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;MAC9C,GAAGD,MAAM,CAACC,IAAI,CAACC,UAAU;MACzBC,eAAe,EAAE,UAAU;MAC3BC,MAAM,EAAEJ,MAAM,CAACC,IAAI,CAACI,MAAM;MAC1BC,KAAK,EAAEN,MAAM,CAACM;IAClB,CAAC;EACL;EACAC,SAASA,CAAA,EAAG;IACR,OAAO,uBAAuB;EAClC;EACA,MAAMC,WAAWA,CAACC,QAAQ,EAAEC,GAAG,EAAEC,OAAO,EAAEC,UAAU,EAAE;IAClD,IAAI,OAAOH,QAAQ,KAAK,QAAQ,IAC5B,MAAM,IAAIA,QAAQ,IAClBI,KAAK,CAACC,OAAO,CAACL,QAAQ,CAACM,IAAI,CAAC,IAC5BN,QAAQ,CAACM,IAAI,CAACC,MAAM,GAAG,CAAC,IACxB,UAAU,IAAIP,QAAQ,CAACM,IAAI,CAAC,CAAC,CAAC,IAC9B,OAAON,QAAQ,CAACM,IAAI,CAAC,CAAC,CAAC,CAACE,QAAQ,KAAK,QAAQ,EAAE;MAC/C,IAAIL,UAAU,KAAK,MAAM,EAAE;QACvB,OAAO;UAAE,GAAGH;QAAS,CAAC;MAC1B;MACA,MAAMS,UAAU,GAAGT,QAAQ,CAACM,IAAI,CAAC,CAAC,CAAC,CAACE,QAAQ;MAC5C,IAAIL,UAAU,KAAK,KAAK,EAAE;QACtB,OAAO,0BAA0BM,UAAU,EAAE;MACjD;MACA,OAAOC,KAAK,CAAC,0BAA0BD,UAAU,EAAE,CAAC,CAACE,IAAI,CAAEC,GAAG,IAAKA,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC;IAClF;IACA,MAAM,IAAI5B,kCAAkC,CAAC,2DAA2D,CAAC;EAC7G;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}