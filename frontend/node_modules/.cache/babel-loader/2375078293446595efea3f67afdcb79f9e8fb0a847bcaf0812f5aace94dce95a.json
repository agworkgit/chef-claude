{"ast":null,"code":"import { omit } from \"../utils/omit.js\";\nimport { BaseConversationalTask, BaseTextGenerationTask, TaskProviderHelper } from \"./providerHelper.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst HYPERBOLIC_API_BASE_URL = \"https://api.hyperbolic.xyz\";\nexport class HyperbolicConversationalTask extends BaseConversationalTask {\n  constructor() {\n    super(\"hyperbolic\", HYPERBOLIC_API_BASE_URL);\n  }\n}\nexport class HyperbolicTextGenerationTask extends BaseTextGenerationTask {\n  constructor() {\n    super(\"hyperbolic\", HYPERBOLIC_API_BASE_URL);\n  }\n  makeRoute() {\n    return \"v1/chat/completions\";\n  }\n  preparePayload(params) {\n    return {\n      messages: [{\n        content: params.args.inputs,\n        role: \"user\"\n      }],\n      ...(params.args.parameters ? {\n        max_tokens: params.args.parameters.max_new_tokens,\n        ...omit(params.args.parameters, \"max_new_tokens\")\n      } : undefined),\n      ...omit(params.args, [\"inputs\", \"parameters\"]),\n      model: params.model\n    };\n  }\n  async getResponse(response) {\n    if (typeof response === \"object\" && \"choices\" in response && Array.isArray(response?.choices) && typeof response?.model === \"string\") {\n      const completion = response.choices[0];\n      return {\n        generated_text: completion.message.content\n      };\n    }\n    throw new InferenceClientProviderOutputError(\"Received malformed response from Hyperbolic text generation API\");\n  }\n}\nexport class HyperbolicTextToImageTask extends TaskProviderHelper {\n  constructor() {\n    super(\"hyperbolic\", HYPERBOLIC_API_BASE_URL);\n  }\n  makeRoute(params) {\n    void params;\n    return `/v1/images/generations`;\n  }\n  preparePayload(params) {\n    return {\n      ...omit(params.args, [\"inputs\", \"parameters\"]),\n      ...params.args.parameters,\n      prompt: params.args.inputs,\n      model_name: params.model\n    };\n  }\n  async getResponse(response, url, headers, outputType) {\n    if (typeof response === \"object\" && \"images\" in response && Array.isArray(response.images) && response.images[0] && typeof response.images[0].image === \"string\") {\n      if (outputType === \"json\") {\n        return {\n          ...response\n        };\n      }\n      if (outputType === \"url\") {\n        return `data:image/jpeg;base64,${response.images[0].image}`;\n      }\n      return fetch(`data:image/jpeg;base64,${response.images[0].image}`).then(res => res.blob());\n    }\n    throw new InferenceClientProviderOutputError(\"Received malformed response from Hyperbolic text-to-image API\");\n  }\n}","map":{"version":3,"names":["omit","BaseConversationalTask","BaseTextGenerationTask","TaskProviderHelper","InferenceClientProviderOutputError","HYPERBOLIC_API_BASE_URL","HyperbolicConversationalTask","constructor","HyperbolicTextGenerationTask","makeRoute","preparePayload","params","messages","content","args","inputs","role","parameters","max_tokens","max_new_tokens","undefined","model","getResponse","response","Array","isArray","choices","completion","generated_text","message","HyperbolicTextToImageTask","prompt","model_name","url","headers","outputType","images","image","fetch","then","res","blob"],"sources":["/Users/agmacbook/Documents/Courses/Meta - Full Stack/Exercises/meta_fullstack_exercises/6_react_basics/12_review/13_chef_claude/node_modules/@huggingface/inference/dist/esm/providers/hyperbolic.js"],"sourcesContent":["import { omit } from \"../utils/omit.js\";\nimport { BaseConversationalTask, BaseTextGenerationTask, TaskProviderHelper, } from \"./providerHelper.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst HYPERBOLIC_API_BASE_URL = \"https://api.hyperbolic.xyz\";\nexport class HyperbolicConversationalTask extends BaseConversationalTask {\n    constructor() {\n        super(\"hyperbolic\", HYPERBOLIC_API_BASE_URL);\n    }\n}\nexport class HyperbolicTextGenerationTask extends BaseTextGenerationTask {\n    constructor() {\n        super(\"hyperbolic\", HYPERBOLIC_API_BASE_URL);\n    }\n    makeRoute() {\n        return \"v1/chat/completions\";\n    }\n    preparePayload(params) {\n        return {\n            messages: [{ content: params.args.inputs, role: \"user\" }],\n            ...(params.args.parameters\n                ? {\n                    max_tokens: params.args.parameters.max_new_tokens,\n                    ...omit(params.args.parameters, \"max_new_tokens\"),\n                }\n                : undefined),\n            ...omit(params.args, [\"inputs\", \"parameters\"]),\n            model: params.model,\n        };\n    }\n    async getResponse(response) {\n        if (typeof response === \"object\" &&\n            \"choices\" in response &&\n            Array.isArray(response?.choices) &&\n            typeof response?.model === \"string\") {\n            const completion = response.choices[0];\n            return {\n                generated_text: completion.message.content,\n            };\n        }\n        throw new InferenceClientProviderOutputError(\"Received malformed response from Hyperbolic text generation API\");\n    }\n}\nexport class HyperbolicTextToImageTask extends TaskProviderHelper {\n    constructor() {\n        super(\"hyperbolic\", HYPERBOLIC_API_BASE_URL);\n    }\n    makeRoute(params) {\n        void params;\n        return `/v1/images/generations`;\n    }\n    preparePayload(params) {\n        return {\n            ...omit(params.args, [\"inputs\", \"parameters\"]),\n            ...params.args.parameters,\n            prompt: params.args.inputs,\n            model_name: params.model,\n        };\n    }\n    async getResponse(response, url, headers, outputType) {\n        if (typeof response === \"object\" &&\n            \"images\" in response &&\n            Array.isArray(response.images) &&\n            response.images[0] &&\n            typeof response.images[0].image === \"string\") {\n            if (outputType === \"json\") {\n                return { ...response };\n            }\n            if (outputType === \"url\") {\n                return `data:image/jpeg;base64,${response.images[0].image}`;\n            }\n            return fetch(`data:image/jpeg;base64,${response.images[0].image}`).then((res) => res.blob());\n        }\n        throw new InferenceClientProviderOutputError(\"Received malformed response from Hyperbolic text-to-image API\");\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}