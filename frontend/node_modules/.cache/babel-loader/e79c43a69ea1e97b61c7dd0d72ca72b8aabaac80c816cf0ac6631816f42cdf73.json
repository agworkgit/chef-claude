{"ast":null,"code":"/**\n * See the registered mapping of HF model ID => OVHcloud model ID here:\n *\n * https://huggingface.co/api/partners/ovhcloud/models\n *\n * This is a publicly available mapping.\n *\n * If you want to try to run inference for a new model locally before it's registered on huggingface.co,\n * you can add it to the dictionary \"HARDCODED_MODEL_ID_MAPPING\" in consts.ts, for dev purposes.\n *\n * - If you work at OVHcloud and want to update this mapping, please use the model mapping API we provide on huggingface.co\n * - If you're a community member and want to add a new supported HF model to OVHcloud, please open an issue on the present repo\n * and we will tag OVHcloud team members.\n *\n * Thanks!\n */\nimport { BaseConversationalTask, BaseTextGenerationTask } from \"./providerHelper.js\";\nimport { omit } from \"../utils/omit.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst OVHCLOUD_API_BASE_URL = \"https://oai.endpoints.kepler.ai.cloud.ovh.net\";\nexport class OvhCloudConversationalTask extends BaseConversationalTask {\n  constructor() {\n    super(\"ovhcloud\", OVHCLOUD_API_BASE_URL);\n  }\n}\nexport class OvhCloudTextGenerationTask extends BaseTextGenerationTask {\n  constructor() {\n    super(\"ovhcloud\", OVHCLOUD_API_BASE_URL);\n  }\n  preparePayload(params) {\n    return {\n      model: params.model,\n      ...omit(params.args, [\"inputs\", \"parameters\"]),\n      ...(params.args.parameters ? {\n        max_tokens: params.args.parameters.max_new_tokens,\n        ...omit(params.args.parameters, \"max_new_tokens\")\n      } : undefined),\n      prompt: params.args.inputs\n    };\n  }\n  async getResponse(response) {\n    if (typeof response === \"object\" && \"choices\" in response && Array.isArray(response?.choices) && typeof response?.model === \"string\") {\n      const completion = response.choices[0];\n      return {\n        generated_text: completion.text\n      };\n    }\n    throw new InferenceClientProviderOutputError(\"Received malformed response from OVHcloud text generation API\");\n  }\n}","map":{"version":3,"names":["BaseConversationalTask","BaseTextGenerationTask","omit","InferenceClientProviderOutputError","OVHCLOUD_API_BASE_URL","OvhCloudConversationalTask","constructor","OvhCloudTextGenerationTask","preparePayload","params","model","args","parameters","max_tokens","max_new_tokens","undefined","prompt","inputs","getResponse","response","Array","isArray","choices","completion","generated_text","text"],"sources":["/Users/agmacbook/Documents/Courses/Meta - Full Stack/Exercises/meta_fullstack_exercises/6_react_basics/12_review/13_chef_claude/node_modules/@huggingface/inference/dist/esm/providers/ovhcloud.js"],"sourcesContent":["/**\n * See the registered mapping of HF model ID => OVHcloud model ID here:\n *\n * https://huggingface.co/api/partners/ovhcloud/models\n *\n * This is a publicly available mapping.\n *\n * If you want to try to run inference for a new model locally before it's registered on huggingface.co,\n * you can add it to the dictionary \"HARDCODED_MODEL_ID_MAPPING\" in consts.ts, for dev purposes.\n *\n * - If you work at OVHcloud and want to update this mapping, please use the model mapping API we provide on huggingface.co\n * - If you're a community member and want to add a new supported HF model to OVHcloud, please open an issue on the present repo\n * and we will tag OVHcloud team members.\n *\n * Thanks!\n */\nimport { BaseConversationalTask, BaseTextGenerationTask } from \"./providerHelper.js\";\nimport { omit } from \"../utils/omit.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst OVHCLOUD_API_BASE_URL = \"https://oai.endpoints.kepler.ai.cloud.ovh.net\";\nexport class OvhCloudConversationalTask extends BaseConversationalTask {\n    constructor() {\n        super(\"ovhcloud\", OVHCLOUD_API_BASE_URL);\n    }\n}\nexport class OvhCloudTextGenerationTask extends BaseTextGenerationTask {\n    constructor() {\n        super(\"ovhcloud\", OVHCLOUD_API_BASE_URL);\n    }\n    preparePayload(params) {\n        return {\n            model: params.model,\n            ...omit(params.args, [\"inputs\", \"parameters\"]),\n            ...(params.args.parameters\n                ? {\n                    max_tokens: params.args.parameters.max_new_tokens,\n                    ...omit(params.args.parameters, \"max_new_tokens\"),\n                }\n                : undefined),\n            prompt: params.args.inputs,\n        };\n    }\n    async getResponse(response) {\n        if (typeof response === \"object\" &&\n            \"choices\" in response &&\n            Array.isArray(response?.choices) &&\n            typeof response?.model === \"string\") {\n            const completion = response.choices[0];\n            return {\n                generated_text: completion.text,\n            };\n        }\n        throw new InferenceClientProviderOutputError(\"Received malformed response from OVHcloud text generation API\");\n    }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,sBAAsB,EAAEC,sBAAsB,QAAQ,qBAAqB;AACpF,SAASC,IAAI,QAAQ,kBAAkB;AACvC,SAASC,kCAAkC,QAAQ,cAAc;AACjE,MAAMC,qBAAqB,GAAG,+CAA+C;AAC7E,OAAO,MAAMC,0BAA0B,SAASL,sBAAsB,CAAC;EACnEM,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,UAAU,EAAEF,qBAAqB,CAAC;EAC5C;AACJ;AACA,OAAO,MAAMG,0BAA0B,SAASN,sBAAsB,CAAC;EACnEK,WAAWA,CAAA,EAAG;IACV,KAAK,CAAC,UAAU,EAAEF,qBAAqB,CAAC;EAC5C;EACAI,cAAcA,CAACC,MAAM,EAAE;IACnB,OAAO;MACHC,KAAK,EAAED,MAAM,CAACC,KAAK;MACnB,GAAGR,IAAI,CAACO,MAAM,CAACE,IAAI,EAAE,CAAC,QAAQ,EAAE,YAAY,CAAC,CAAC;MAC9C,IAAIF,MAAM,CAACE,IAAI,CAACC,UAAU,GACpB;QACEC,UAAU,EAAEJ,MAAM,CAACE,IAAI,CAACC,UAAU,CAACE,cAAc;QACjD,GAAGZ,IAAI,CAACO,MAAM,CAACE,IAAI,CAACC,UAAU,EAAE,gBAAgB;MACpD,CAAC,GACCG,SAAS,CAAC;MAChBC,MAAM,EAAEP,MAAM,CAACE,IAAI,CAACM;IACxB,CAAC;EACL;EACA,MAAMC,WAAWA,CAACC,QAAQ,EAAE;IACxB,IAAI,OAAOA,QAAQ,KAAK,QAAQ,IAC5B,SAAS,IAAIA,QAAQ,IACrBC,KAAK,CAACC,OAAO,CAACF,QAAQ,EAAEG,OAAO,CAAC,IAChC,OAAOH,QAAQ,EAAET,KAAK,KAAK,QAAQ,EAAE;MACrC,MAAMa,UAAU,GAAGJ,QAAQ,CAACG,OAAO,CAAC,CAAC,CAAC;MACtC,OAAO;QACHE,cAAc,EAAED,UAAU,CAACE;MAC/B,CAAC;IACL;IACA,MAAM,IAAItB,kCAAkC,CAAC,+DAA+D,CAAC;EACjH;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}