{"ast":null,"code":"import { omit } from \"../utils/omit.js\";\nimport { BaseConversationalTask, BaseTextGenerationTask, TaskProviderHelper } from \"./providerHelper.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst TOGETHER_API_BASE_URL = \"https://api.together.xyz\";\nexport class TogetherConversationalTask extends BaseConversationalTask {\n  constructor() {\n    super(\"together\", TOGETHER_API_BASE_URL);\n  }\n  preparePayload(params) {\n    const payload = super.preparePayload(params);\n    const response_format = payload.response_format;\n    if (response_format?.type === \"json_schema\" && response_format?.json_schema?.schema) {\n      payload.response_format = {\n        type: \"json_schema\",\n        schema: response_format.json_schema.schema\n      };\n    }\n    return payload;\n  }\n}\nexport class TogetherTextGenerationTask extends BaseTextGenerationTask {\n  constructor() {\n    super(\"together\", TOGETHER_API_BASE_URL);\n  }\n  preparePayload(params) {\n    return {\n      model: params.model,\n      ...params.args,\n      prompt: params.args.inputs\n    };\n  }\n  async getResponse(response) {\n    if (typeof response === \"object\" && \"choices\" in response && Array.isArray(response?.choices) && typeof response?.model === \"string\") {\n      const completion = response.choices[0];\n      return {\n        generated_text: completion.text\n      };\n    }\n    throw new InferenceClientProviderOutputError(\"Received malformed response from Together text generation API\");\n  }\n}\nexport class TogetherTextToImageTask extends TaskProviderHelper {\n  constructor() {\n    super(\"together\", TOGETHER_API_BASE_URL);\n  }\n  makeRoute() {\n    return \"v1/images/generations\";\n  }\n  preparePayload(params) {\n    return {\n      ...omit(params.args, [\"inputs\", \"parameters\"]),\n      ...params.args.parameters,\n      prompt: params.args.inputs,\n      response_format: \"base64\",\n      model: params.model\n    };\n  }\n  async getResponse(response, url, headers, outputType) {\n    if (typeof response === \"object\" && \"data\" in response && Array.isArray(response.data) && response.data.length > 0 && \"b64_json\" in response.data[0] && typeof response.data[0].b64_json === \"string\") {\n      if (outputType === \"json\") {\n        return {\n          ...response\n        };\n      }\n      const base64Data = response.data[0].b64_json;\n      if (outputType === \"url\") {\n        return `data:image/jpeg;base64,${base64Data}`;\n      }\n      return fetch(`data:image/jpeg;base64,${base64Data}`).then(res => res.blob());\n    }\n    throw new InferenceClientProviderOutputError(\"Received malformed response from Together text-to-image API\");\n  }\n}","map":{"version":3,"names":["omit","BaseConversationalTask","BaseTextGenerationTask","TaskProviderHelper","InferenceClientProviderOutputError","TOGETHER_API_BASE_URL","TogetherConversationalTask","constructor","preparePayload","params","payload","response_format","type","json_schema","schema","TogetherTextGenerationTask","model","args","prompt","inputs","getResponse","response","Array","isArray","choices","completion","generated_text","text","TogetherTextToImageTask","makeRoute","parameters","url","headers","outputType","data","length","b64_json","base64Data","fetch","then","res","blob"],"sources":["/Users/agmacbook/Documents/Courses/Meta - Full Stack/Exercises/meta_fullstack_exercises/6_react_basics/12_review/13_chef_claude/node_modules/@huggingface/inference/dist/esm/providers/together.js"],"sourcesContent":["import { omit } from \"../utils/omit.js\";\nimport { BaseConversationalTask, BaseTextGenerationTask, TaskProviderHelper, } from \"./providerHelper.js\";\nimport { InferenceClientProviderOutputError } from \"../errors.js\";\nconst TOGETHER_API_BASE_URL = \"https://api.together.xyz\";\nexport class TogetherConversationalTask extends BaseConversationalTask {\n    constructor() {\n        super(\"together\", TOGETHER_API_BASE_URL);\n    }\n    preparePayload(params) {\n        const payload = super.preparePayload(params);\n        const response_format = payload.response_format;\n        if (response_format?.type === \"json_schema\" && response_format?.json_schema?.schema) {\n            payload.response_format = {\n                type: \"json_schema\",\n                schema: response_format.json_schema.schema,\n            };\n        }\n        return payload;\n    }\n}\nexport class TogetherTextGenerationTask extends BaseTextGenerationTask {\n    constructor() {\n        super(\"together\", TOGETHER_API_BASE_URL);\n    }\n    preparePayload(params) {\n        return {\n            model: params.model,\n            ...params.args,\n            prompt: params.args.inputs,\n        };\n    }\n    async getResponse(response) {\n        if (typeof response === \"object\" &&\n            \"choices\" in response &&\n            Array.isArray(response?.choices) &&\n            typeof response?.model === \"string\") {\n            const completion = response.choices[0];\n            return {\n                generated_text: completion.text,\n            };\n        }\n        throw new InferenceClientProviderOutputError(\"Received malformed response from Together text generation API\");\n    }\n}\nexport class TogetherTextToImageTask extends TaskProviderHelper {\n    constructor() {\n        super(\"together\", TOGETHER_API_BASE_URL);\n    }\n    makeRoute() {\n        return \"v1/images/generations\";\n    }\n    preparePayload(params) {\n        return {\n            ...omit(params.args, [\"inputs\", \"parameters\"]),\n            ...params.args.parameters,\n            prompt: params.args.inputs,\n            response_format: \"base64\",\n            model: params.model,\n        };\n    }\n    async getResponse(response, url, headers, outputType) {\n        if (typeof response === \"object\" &&\n            \"data\" in response &&\n            Array.isArray(response.data) &&\n            response.data.length > 0 &&\n            \"b64_json\" in response.data[0] &&\n            typeof response.data[0].b64_json === \"string\") {\n            if (outputType === \"json\") {\n                return { ...response };\n            }\n            const base64Data = response.data[0].b64_json;\n            if (outputType === \"url\") {\n                return `data:image/jpeg;base64,${base64Data}`;\n            }\n            return fetch(`data:image/jpeg;base64,${base64Data}`).then((res) => res.blob());\n        }\n        throw new InferenceClientProviderOutputError(\"Received malformed response from Together text-to-image API\");\n    }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}